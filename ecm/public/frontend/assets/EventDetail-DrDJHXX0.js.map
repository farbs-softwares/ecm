{"version":3,"file":"EventDetail-DrDJHXX0.js","sources":["../../../../frontend/src/components/Modals/NegotiateModal.vue","../../../../frontend/src/components/EventCardOverlay.vue","../../../../frontend/src/components/Controls/Rating.vue","../../../../frontend/src/components/Modals/ReviewModal.vue","../../../../frontend/src/components/EventReviews.vue","../../../../frontend/src/pages/EventDetail.vue"],"sourcesContent":["<template>\n\t<Dialog\n\t\tv-model=\"show\"\n\t\t:options=\"{\n\t\t\ttitle: __('Send Offer'),\n\t\t\tsize: 'lg',\n\t\t\tactions: [\n\t\t\t\t{\n\t\t\t\t\tlabel: chapterDetail ? __('Edit Offer') : __('Send Offer'),\n\t\t\t\t\tvariant: 'solid',\n\t\t\t\t\tonClick: (close) =>\n\t\t\t\t\t\tchapterDetail ? editChapter(close) : addChapter(close),\n\t\t\t\t},\n\t\t\t],\n\t\t}\"\n\t>\n\t\t<template #body-content>\n\t\t\t<div class=\"my-3 leading-6\">\n\t\t\t\t <!-- {{ event.title }} -->\n\t\t\t\t\t</div>\n\t\t\t<FormControl label=\"Details\" v-model=\"offer.details\" class=\"mb-4\" type=\"textarea\" />\n\t\t\t<FormControl label=\"Sugessted price\" v-model=\"offer.suggested_price\" class=\"mb-4\" />\n\t\t\t<FormControl label=\"About Me\" v-model=\"offer.about_me\" class=\"mb-4\" type = \"textarea\"/>\n\t\t</template>\n\t</Dialog>\n</template>\n<script setup>\nimport { Dialog, FormControl, createResource } from 'frappe-ui'\nimport { defineModel, reactive, watch, inject } from 'vue'\nimport { createToast, formatTime } from '@/utils/'\n\nconst show = defineModel()\nconst outline = defineModel('outline')\n\nconst props = defineProps({\n\tevent: {\n\t\ttype: String,\n\t\trequired: true,\n\t},\n\tofferDetail: {\n\t\ttype: Object,\n\t},\n})\nconst chapter = reactive({\n\ttitle: '',\n})\nconst offer = reactive({\n\tdetails: '',\n\tsuggested_price:0,\n\tabout_me:''\n})\nconst chapterResource = createResource({\n\turl: 'frappe.client.insert',\n\tmakeParams(values) {\n\t\treturn {\n\t\t\tdoc: {\n\t\t\t\tdoctype: 'Event Offers',\n\t\t\t\toffer: offer.details,\n\t\t\t\tabout_me: offer.about_me,\n\t\t\t\tevent: props.event,\n\t\t\t\tsuggested_price: offer.suggested_price\n\t\t\t},\n\t\t}\n\t},\n})\n\nconst chapterEditResource = createResource({\n\turl: 'frappe.client.set_value',\n\tmakeParams(values) {\n\t\treturn {\n\t\t\tdoctype: 'Event Offers',\n\t\t\tname: props.offerDetail?.name,\n\t\t\tfieldnames: ['offer', 'about_me', 'suggested_price'],\n\t\t\tvalues: [offer.details, offer.about_me, offer.suggested_price],\n\t\t}\n\t},\n})\n\n\n\nconst addChapter = (close) => {\n\tchapterResource.submit(\n\t\t{},\n\t\t{\n\t\t\tvalidate() {\n\t\t\t\tif (!offer.details) {\n\t\t\t\t\treturn 'Details is required'\n\t\t\t\t}\n\t\t\t},\n\t\t\tonSuccess: (data) => {\n\t\t\t\t\n\t\t\t\tcreateToast({\n\t\t\t\ttext: 'Your Offer sent to event Creater successfully',\n\t\t\t\ticon: 'check',\n\t\t\t\ticonClasses: 'bg-green-600 text-white rounded-md p-px',\n\t\t\t})\n\t\t\t\tclose()\n\t\t\t},\n\t\t\tonError(err) {\n\t\t\t\tshowError(err)\n\t\t\t},\n\t\t}\n\t)\n}\n\nconst editChapter = (close) => {\n\tchapterEditResource.submit(\n\t\t{},\n\t\t{\n\t\t\tvalidate() {\n\t\t\t\tif (!chapter.title) {\n\t\t\t\t\treturn 'Title is required'\n\t\t\t\t}\n\t\t\t},\n\t\t\tonSuccess() {\n\t\t\t\toutline.value.reload()\n\t\t\t\tcreateToast({\n\t\t\t\t\ttext: 'Chapter updated successfully',\n\t\t\t\t\ticon: 'check',\n\t\t\t\t\ticonClasses: 'bg-green-600 text-white rounded-md p-px',\n\t\t\t\t})\n\t\t\t\tclose()\n\t\t\t},\n\t\t\tonError(err) {\n\t\t\t\tshowError(err)\n\t\t\t},\n\t\t}\n\t)\n}\n\nconst showError = (err) => {\n\tcreateToast({\n\t\ttitle: 'Error',\n\t\ttext: err.messages?.[0] || err,\n\t\ticon: 'x',\n\t\ticonClasses: 'bg-red-600 text-white rounded-md p-px',\n\t\tposition: 'top-center',\n\t\ttimeout: 10,\n\t})\n}\n\nwatch(\n\t() => props.chapterDetail,\n\t(newChapter) => {\n\t\tchapter.title = newChapter?.title\n\t}\n)\n</script>\n","<template>\n\t<div class=\"shadow rounded-md min-w-80\">\n\t\t<iframe\n\t\t\tv-if=\"eventDetail.data.video_link\"\n\t\t\t:src=\"video_link\"\n\t\t\tclass=\"rounded-t-md min-h-56 w-full\"\n\t\t/>\n\t\t<div\n\t\t\tclass=\"rounded-t-md min-h-56 w-full\"\n\t\t\t:class=\"{ 'default-image': !eventDetail.data.cover_image }\"\n\t\t\t:style=\"{ backgroundImage: 'url(\\'' + encodeURI(eventDetail.data.cover_image) + '\\')' }\"\n\t\t>\n\t\t\t<div v-if=\"!eventDetail.data.cover_image\" class=\"image-placeholder\">\n\t\t\t\t{{ eventDetail.data.title[0] }}\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"p-5\">\n\t\t\t<div v-if=\"eventDetail.data.price\" class=\"text-2xl font-semibold mb-3\">\n\t\t\t\t{{ eventDetail.data.price }}\n\t\t\t</div>\n\t\t\t<router-link\n\t\t\t\tv-if=\"eventDetail.data.membership\"\n\t\t\t\t:to=\"{\n\t\t\t\t\tname: 'Lesson',\n\t\t\t\t\tparams: {\n\t\t\t\t\t\teventName: eventDetail.name,\n\t\t\t\t\t\tchapterNumber: eventDetail.data.current_lesson\n\t\t\t\t\t\t\t? eventDetail.data.current_lesson.split('-')[0]\n\t\t\t\t\t\t\t: 1,\n\t\t\t\t\t\tlessonNumber: eventDetail.data.current_lesson\n\t\t\t\t\t\t\t? eventDetail.data.current_lesson.split('-')[1]\n\t\t\t\t\t\t\t: 1,\n\t\t\t\t\t},\n\t\t\t\t}\"\n\t\t\t>\n\t\t\t\t<Button variant=\"solid\" size=\"md\" class=\"w-full\">\n\t\t\t\t\t<span>\n\t\t\t\t\t\t{{ __('Continue Learning') }}\n\t\t\t\t\t</span>\n\t\t\t\t</Button>\n\t\t\t</router-link>\n\t\t\t<router-link\n\t\t\t\tv-else-if=\"eventDetail.data.paid_course\"\n\t\t\t\t:to=\"{\n\t\t\t\t\tname: 'Billing',\n\t\t\t\t\tparams: {\n\t\t\t\t\t\ttype: 'eventDetail',\n\t\t\t\t\t\tname: eventDetail.data.name,\n\t\t\t\t\t},\n\t\t\t\t}\"\n\t\t\t>\n\t\t\t\t<Button variant=\"solid\" size=\"md\" class=\"w-full\">\n\t\t\t\t\t<span>\n\t\t\t\t\t\t{{ __('Buy this eventDetail') }}\n\t\t\t\t\t</span>\n\t\t\t\t</Button>\n\t\t\t</router-link>\n\t\t\t<div\n\t\t\t\tv-else-if=\"eventDetail.data.disable_self_learning\"\n\t\t\t\tclass=\"bg-blue-100 text-blue-900 text-sm rounded-md py-1 px-3\"\n\t\t\t>\n\t\t\t\t{{ __('Contact the Administrator to enroll for this eventDetail.') }}\n\t\t\t</div>\n\t\t\n\t\t\t<Button variant=\"solid\"\n\t\t\t\tclass=\"w-full\"\n\t\t\t\tsize=\"md\" @click=\"openNegotiateModal()\">\n\t\t\t\t{{ __('Negotiate') }}\n\t\t\t</Button>\n\t\t\n\t\t\t<router-link\n\t\t\t\tv-if=\"user?.data?.is_moderator || is_owner()\"\n\t\t\t\t:to=\"{\n\t\t\t\t\tname: 'CreateEvent',\n\t\t\t\t\tparams: {\n\t\t\t\t\t\teventName: eventDetail.data.name,\n\t\t\t\t\t},\n\t\t\t\t}\"\n\t\t\t>\n\t\t\t\t<Button variant=\"subtle\" class=\"w-full mt-2\" size=\"md\">\n\t\t\t\t\t<span>\n\t\t\t\t\t\t{{ __('Edit') }}\n\t\t\t\t\t</span>\n\t\t\t\t</Button>\n\n\t\t\t\t<Button variant=\"solid\"\n\t\t\t\tclass=\"w-full\"\n\t\t\t\tsize=\"md\" @click=\"openNegotiateModal()\">\n\t\t\t\t{{ __('Bookmark') }}\n\t\t\t</Button>\n\n\t\t\t</router-link>\n\t\t\t<div class=\"mt-8 mb-4 font-medium\">\n\t\t\t\t{{ __('This eventDetail has:') }}\n\t\t\t</div>\n\t\t\t<div class=\"flex items-center mb-3\">\n\t\t\t\t<BookOpen class=\"h-5 w-5 stroke-1.5 text-gray-600\" />\n\t\t\t\t<span class=\"ml-2\">\n\t\t\t\t\t{{ eventDetail.data.lesson_count }} {{ __('Tasks') }}\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t\t<div class=\"flex items-center mb-3\">\n\t\t\t\t<Users class=\"h-5 w-5 stroke-1.5 text-gray-600\" />\n\t\t\t\t<span class=\"ml-2\">\n\t\t\t\t\t{{ eventDetail.data.enrollment_count_formatted }}\n\t\t\t\t\t{{ __('Suggestion') }}\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t\t<div class=\"flex items-center mb-3\">\n\t\t\t\t<Bookmark class=\"h-5 w-5 stroke-1.5 text-gray-600\" />\n\t\t\t\t<span class=\"ml-2\">\n\t\t\t\t\t{{ eventDetail.data.enrollment_count_formatted }}\n\t\t\t\t\t{{ __('Bookmarks') }}\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t\t<div class=\"flex items-center\">\n\t\t\t\t<Star class=\"h-5 w-5 stroke-1.5 fill-orange-500 text-gray-50\" />\n\t\t\t\t<span class=\"ml-2\">\n\t\t\t\t\t{{ eventDetail.data.avg_rating }} {{ __('Rating') }}\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t</div>\n\t\t<NegotiateModal\n\t\tv-model=\"showNegotiateModal\"\n\t\t:eventDetail=\"props.eventDetail.data.name\"\n\t\t:chapterDetail=\"getCurrentChapter()\"\n\t    />\n\t</div>\n</template>\n<script setup>\nimport { BookOpen, Users, Star,Laptop,Bookmark } from 'lucide-vue-next'\nimport NegotiateModal from '@/components/Modals/NegotiateModal.vue'\nimport { computed, inject } from 'vue'\nimport { Button, createResource } from 'frappe-ui'\nimport { createToast } from '@/utils/'\nimport { useRouter } from 'vue-router'\nimport { ref } from 'vue'\n\nconst router = useRouter()\nconst user = inject('$user')\nconst currentEvent = ref(null)\nconst showNegotiateModal = ref(false)\n\nconst getCurrentChapter = () => {\n\treturn currentEvent.value\n}\nconst props = defineProps({\n\teventDetail: {\n\t\ttype: Object,\n\t\tdefault: null,\n\t},\n\teventName: {\n\t\ttype: String,\n\t\trequired: true,\n\t},\n})\n\nconst video_link = computed(() => {\n\tif (props.eventDetail.data.video_link) {\n\t\treturn 'https://www.youtube.com/embed/' + props.eventDetail.data.video_link\n\t}\n\treturn null\n})\n\nfunction enrollStudent() {\n\tif (!user.data) {\n\t\tcreateToast({\n\t\t\ttitle: 'Please Login',\n\t\t\ticon: 'alert-circle',\n\t\t\ticonClasses: 'text-yellow-600 bg-yellow-100',\n\t\t})\n\t\tsetTimeout(() => {\n\t\t\twindow.location.href = `/login?redirect-to=${window.location.pathname}`\n\t\t}, 3000)\n\t} else {\n\t\tconst enrollStudentResource = createResource({\n\t\t\turl: 'lms.lms.doctype.lms_enrollment.lms_enrollment.create_membership',\n\t\t})\n\t\tenrollStudentResource\n\t\t\t.submit({\n\t\t\t\teventDetail: props.eventDetail.data.name,\n\t\t\t})\n\t\t\t.then(() => {\n\t\t\t\tcreateToast({\n\t\t\t\t\ttitle: 'Enrolled Successfully',\n\t\t\t\t\ticon: 'check',\n\t\t\t\t\ticonClasses: 'text-green-600 bg-green-100',\n\t\t\t\t})\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\trouter.push({\n\t\t\t\t\t\tname: 'Lesson',\n\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\teventName: props.eventDetail.data.name,\n\t\t\t\t\t\t\tchapterNumber: 1,\n\t\t\t\t\t\t\tlessonNumber: 1,\n\t\t\t\t\t\t},\n\t\t\t\t\t})\n\t\t\t\t}, 3000)\n\t\t\t})\n\t}\n}\n\nconst openNegotiateModal = (eventDetail = null) => {\n\tcurrentEvent.value = eventDetail\n\tshowNegotiateModal.value = true\n}\nconst is_owner = () => {\n\tlet user_is_owner = false\n\tif(props.eventDetail.data?.owner == user.data?.name)\n\t   user_is_owner = true\n/* \tprops.eventDetail.data.instructors.forEach((instructor) => {\n\t\tif (!user_is_instructor && instructor.name == user.data?.name) {\n\t\t\tuser_is_instructor = true\n\t\t}\n\t}) */\n    //console.log(\"user\",props.eventDetail.data)\n\treturn user_is_owner\n}\n</script>\n","<template>\n\t<div class=\"flex text-center\">\n\t\t<div v-for=\"index in 5\">\n\t\t\t<Star\n\t\t\t\t:class=\"index <= rating ? 'fill-orange-500' : ''\"\n\t\t\t\tclass=\"h-6 w-6 fill-gray-400 text-gray-50 mr-1 cursor-pointer\"\n\t\t\t\t@click=\"markRating(index)\"\n\t\t\t/>\n\t\t</div>\n\t</div>\n</template>\n\n<script setup>\nimport { Star } from 'lucide-vue-next'\nimport { ref } from 'vue'\nconst props = defineProps({\n\tid: {\n\t\ttype: String,\n\t\tdefault: '',\n\t},\n\tmodelValue: {\n\t\ttype: Number,\n\t\tdefault: 0,\n\t},\n})\n\nconst emit = defineEmits(['update:modelValue'])\nlet rating = ref(props.modelValue)\n\nlet emitChange = (value) => {\n\temit('update:modelValue', value)\n}\n\nfunction markRating(index) {\n\temitChange(index)\n\trating.value = index\n}\n</script>\n","<template>\n\t<Dialog\n\t\tv-model=\"show\"\n\t\t:options=\"{\n\t\t\ttitle: __('Write a Review'),\n\t\t\tsize: 'xl',\n\t\t\tactions: [\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Submit',\n\t\t\t\t\tvariant: 'solid',\n\t\t\t\t\tonClick: (close) => submitReview(close),\n\t\t\t\t},\n\t\t\t],\n\t\t}\"\n\t>\n\t\t<template #body-content>\n\t\t\t<div class=\"flex flex-col gap-4\">\n\t\t\t\t<div>\n\t\t\t\t\t<div class=\"mb-1.5 text-sm text-gray-600\">\n\t\t\t\t\t\t{{ __('Rating') }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<Rating v-model=\"review.rating\" />\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<div class=\"mb-1.5 text-sm text-gray-600\">\n\t\t\t\t\t\t{{ __('Review') }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<Textarea type=\"text\" size=\"md\" rows=\"5\" v-model=\"review.review\" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</template>\n\t</Dialog>\n</template>\n<script setup>\nimport { Dialog, Textarea, createResource } from 'frappe-ui'\nimport { defineModel, reactive } from 'vue'\nimport Rating from '@/components/Controls/Rating.vue'\nimport { createToast } from '@/utils/'\n\nconst show = defineModel()\nconst reviews = defineModel('reloadReviews')\nconst hasReviewed = defineModel('hasReviewed')\n\nlet review = reactive({\n\treview: '',\n\trating: 0,\n})\n\nconst props = defineProps({\n\teventName: {\n\t\ttype: String,\n\t\trequired: true,\n\t},\n})\n\nconst createReview = createResource({\n\turl: 'frappe.client.insert',\n\tmakeParams(values) {\n\t\treturn {\n\t\t\tdoc: {\n\t\t\t\tdoctype: 'LMS Course Review',\n\t\t\t\tcourse: props.eventName,\n\t\t\t\t...values,\n\t\t\t},\n\t\t}\n\t},\n})\nfunction submitReview(close) {\n\treview.rating = review.rating / 5\n\tcreateReview.submit(review, {\n\t\tvalidate() {\n\t\t\tif (!review.rating) {\n\t\t\t\treturn 'Please enter a rating.'\n\t\t\t}\n\t\t},\n\t\tonSuccess() {\n\t\t\treviews.value.reload()\n\t\t\thasReviewed.value.reload()\n\t\t},\n\t\tonError(err) {\n\t\t\tcreateToast({\n\t\t\t\ttext: err.messages?.[0] || err,\n\t\t\t\ticon: 'x',\n\t\t\t\ticonClasses: 'text-red-600 bg-red-300',\n\t\t\t})\n\t\t},\n\t})\n\tclose()\n}\n</script>\n","<template>\n\t<div v-if=\"reviews.data?.length || membership\" class=\"mt-20 mb-10\">\n\t\t<Button\n\t\t\tv-if=\"membership && !hasReviewed.data\"\n\t\t\t@click=\"openReviewModal()\"\n\t\t\tclass=\"float-right\"\n\t\t>\n\t\t\t{{ __('Write a Review') }}\n\t\t</Button>\n\t\t<div class=\"flex items-center font-semibold text-2xl\">\n\t\t\t{{ __('Student Reviews') }}\n\t\t</div>\n\t\t<div class=\"grid gap-8 mt-10\">\n\t\t\t<div v-for=\"(review, index) in reviews.data\">\n\t\t\t\t<div class=\"flex items-center\">\n\t\t\t\t\t<router-link\n\t\t\t\t\t\t:to=\"{\n\t\t\t\t\t\t\tname: 'Profile',\n\t\t\t\t\t\t\tparams: { username: review.owner_details.username },\n\t\t\t\t\t\t}\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<UserAvatar :user=\"review.owner_details\" :size=\"'2xl'\" />\n\t\t\t\t\t</router-link>\n\t\t\t\t\t<div class=\"mx-4\">\n\t\t\t\t\t\t<router-link\n\t\t\t\t\t\t\t:to=\"{\n\t\t\t\t\t\t\t\tname: 'Profile',\n\t\t\t\t\t\t\t\tparams: { username: review.owner_details.username },\n\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span class=\"text-lg font-medium mr-4\">\n\t\t\t\t\t\t\t\t{{ review.owner_details.full_name }}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</router-link>\n\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t{{ review.creation }}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<div class=\"flex mt-2\">\n\t\t\t\t\t\t\t<Star\n\t\t\t\t\t\t\t\tv-for=\"index in 5\"\n\t\t\t\t\t\t\t\tclass=\"h-5 w-5 text-gray-100 bg-gray-200 rounded-sm mr-2\"\n\t\t\t\t\t\t\t\t:class=\"\n\t\t\t\t\t\t\t\t\tindex <= Math.ceil(review.rating)\n\t\t\t\t\t\t\t\t\t\t? 'fill-orange-500'\n\t\t\t\t\t\t\t\t\t\t: 'fill-gray-600'\n\t\t\t\t\t\t\t\t\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div v-if=\"review.review\" class=\"mt-4 leading-5\">\n\t\t\t\t\t{{ review.review }}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<ReviewModal\n\t\tv-model=\"showReviewModal\"\n\t\tv-model:reloadReviews=\"reviews\"\n\t\tv-model:hasReviewed=\"hasReviewed\"\n\t\t:eventName=\"eventName\"\n\t/>\n</template>\n<script setup>\nimport { Star } from 'lucide-vue-next'\nimport { createResource, Button } from 'frappe-ui'\nimport { computed, ref, inject } from 'vue'\nimport UserAvatar from '@/components/UserAvatar.vue'\nimport ReviewModal from '@/components/Modals/ReviewModal.vue'\n\nconst user = inject('$user')\n\nconst props = defineProps({\n\teventName: {\n\t\ttype: String,\n\t\trequired: true,\n\t},\n\tavg_rating: {\n\t\ttype: Number,\n\t\trequired: true,\n\t},\n\tmembership: {\n\t\ttype: Object,\n\t\trequired: false,\n\t},\n})\n\nconst hasReviewed = createResource({\n\turl: 'frappe.client.get_count',\n\tcache: ['eligible_to_review', props.eventName, props.membership?.member],\n\tparams: {\n\t\tdoctype: 'ECM Event Review',\n\t\tfilters: {\n\t\t\tevent: props.eventName,\n\t\t\towner: props.membership?.member,\n\t\t},\n\t},\n\tauto: user.data?.name ? true : false,\n})\n\nconst reviews = createResource({\n\turl: 'ecm.events_connect_management.utils.get_reviews',\n\tcache: ['event_reviews', props.eventName],\n\tparams: {\n\t\tevent: props.eventName,\n\t},\n\tauto: true,\n})\n\nconst showReviewModal = ref(false)\n\nfunction openReviewModal() {\n\tshowReviewModal.value = true\n}\n</script>\n","<template>\n\t<div v-if=\"eventDetail.data\">\n\t\t<header\n\t\t\tclass=\"sticky top-0 z-10 flex items-center justify-between border-b bg-white px-3 py-2.5 sm:px-5\"\n\t\t>\n\t\t\t<Breadcrumbs class=\"h-7\" :items=\"breadcrumbs\" />\n\t\t</header>\n\t\t<div class=\"m-5\">\n\t\t\t<div class=\"flex justify-between w-full\">\n\t\t\t\t<div class=\"md:w-2/3\">\n\t\t\n\t\t\t\t\t<div class=\"text-3xl font-semibold\">\n\t\t\t\t\t\t{{ eventDetail.data.title }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"my-3 leading-6\">\n\t\t\t\t\t\t{{ eventDetail.data.about_event }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"flex items-center\">\n\t\t\t\t\t\t<!-- <Tooltip\n\t\t\t\t\t\t\tv-if=\"eventDetail.data.avg_rating\"\n\t\t\t\t\t\t\t:text=\"__('Average Rating')\"\n\t\t\t\t\t\t\tclass=\"flex items-center\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Star class=\"h-5 w-5 text-gray-100 fill-orange-500\" />\n\t\t\t\t\t\t\t<span class=\"ml-1\">\n\t\t\t\t\t\t\t\t{{ course.data.avg_rating }}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</Tooltip> -->\n\t\t\t\t\t\t<!-- <span v-if=\"course.data.avg_rating\" class=\"mx-3\">&middot;</span> -->\n\t\t\t\t\t\t<!-- <Tooltip\n\t\t\t\t\t\t\tv-if=\"course.data.enrollment_count\"\n\t\t\t\t\t\t\t:text=\"__('Enrolled Students')\"\n\t\t\t\t\t\t\tclass=\"flex items-center\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Users class=\"h-4 w-4 text-gray-700\" />\n\t\t\t\t\t\t\t<span class=\"ml-1\">\n\t\t\t\t\t\t\t\t{{ course.data.enrollment_count_formatted }}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t<span v-if=\"course.data.enrollment_count\" class=\"mx-3\"\n\t\t\t\t\t\t\t>&middot;</span\n\t\t\t\t\t\t> -->\n\t\t\t\t\t\t<!-- <div class=\"flex items-center\">\n\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\tclass=\"h-6 mr-1\"\n\t\t\t\t\t\t\t\t:class=\"{\n\t\t\t\t\t\t\t\t\t'avatar-group overlap': course.data.instructors.length > 1,\n\t\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<UserAvatar\n\t\t\t\t\t\t\t\t\tv-for=\"instructor in course.data.instructors\"\n\t\t\t\t\t\t\t\t\t:user=\"instructor\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<CourseInstructors :instructors=\"course.data.instructors\" />\n\t\t\t\t\t\t</div> -->\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"flex mt-3 mb-4 w-fit\">\n\t\t\t\t\t<!-- \t<Badge\n\t\t\t\t\t\t\ttheme=\"gray\"\n\t\t\t\t\t\t\tsize=\"lg\"\n\t\t\t\t\t\t\tclass=\"mr-2\"\n\t\t\t\t\t\t\tv-for=\"tag in course.data.tags\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{ tag }}\n\t\t\t\t\t\t</Badge> -->\n\t\t\t\t\t</div>\n\t\t\t\t\t<EventCardOverlay :eventDetail=\"eventDetail\" class=\"md:hidden mb-4\" />\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-html=\"eventDetail.data.full_description\"\n\t\t\t\t\t\tclass=\"course-description\"\n\t\t\t\t\t></div>\n\t\t\t\t\t<div class=\"mt-10\">\n\t\t\t\t\t\t <EventOutline :eventName=\"eventDetail.data.name\" :showOutline=\"true\" /> \n\t\t\t\t\t</div>\n\t\t\t\t\t<EventReviews\n\t\t\t\t\t\t:eventName=\"eventDetail.data.title\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"hidden md:block\">\n\t\t\t\t \t<EventCardOverlay :eventDetail=\"eventDetail\" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n<script setup>\nimport { createResource, Breadcrumbs, Badge, Tooltip } from 'frappe-ui'\nimport { computed } from 'vue'\nimport { Users, Star } from 'lucide-vue-next'\nimport EventCardOverlay from '@/components/EventCardOverlay.vue'\nimport EventOutline from '@/components/EventOutline.vue'\nimport EventReviews from '@/components/EventReviews.vue'\nimport UserAvatar from '@/components/UserAvatar.vue'\nimport { updateDocumentTitle } from '@/utils'\nimport CourseInstructors from '@/components/CourseInstructors.vue'\n\n\n\nconst props = defineProps({\n\teventName: {\n\t\ttype: String,\n\t\trequired: true,\n\t},\n})\n\nconst eventDetail = createResource({\n\turl: 'ecm.events_connect_management.utils.get_event_details',\n\tcache: ['event', props.eventName],\n\tparams: {\n\t\tevent: props.eventName,\n\t},\n\tauto: true,\n})\n\nconst breadcrumbs = computed(() => {\n\tlet items = [{ label: 'All Events', route: { name: 'Events' } }]\n\titems.push({\n\t\tlabel: eventDetail?.data?.title,\n\t\troute: { name: 'EventDetail', params: { eventName: eventDetail?.data?.name } },\n\t})\n\treturn items\n})\n\nconst pageMeta = computed(() => {\n\treturn {\n\t\ttitle: eventDetail?.data?.title,\n\t\tdescription: eventDetail?.data?.about_event,\n\t}\n})\n\nupdateDocumentTitle(pageMeta)\n</script>\n<style>\n.course-description p {\n\tmargin-bottom: 1rem;\n\tline-height: 1.7;\n}\n.course-description li {\n\tline-height: 1.7;\n}\n\n.course-description ol {\n\tlist-style: auto;\n\tmargin: revert;\n\tpadding: revert;\n}\n\n.course-description ul {\n\tlist-style: disc;\n\tmargin: revert;\n\tpadding: revert;\n}\n\n.avatar-group {\n\tdisplay: inline-flex;\n\talign-items: center;\n}\n\n.avatar-group .avatar {\n\ttransition: margin 0.1s ease-in-out;\n}\n</style>\n"],"names":["show","_useModel","outline","__props","props","chapter","reactive","offer","chapterResource","createResource","values","chapterEditResource","_a","addChapter","close","data","createToast","err","showError","editChapter","watch","newChapter","useRouter","user","inject","currentEvent","ref","showNegotiateModal","getCurrentChapter","video_link","computed","openNegotiateModal","eventDetail","is_owner","user_is_owner","_b","emit","__emit","rating","emitChange","value","markRating","index","reviews","hasReviewed","review","createReview","__spreadValues","submitReview","_c","showReviewModal","openReviewModal","breadcrumbs","items","pageMeta","updateDocumentTitle"],"mappings":"42CA+BA,MAAMA,EAAOC,gBAAY,EACnBC,EAAUD,EAAYE,EAAA,SAAS,EAE/BC,EAAQD,EASRE,EAAUC,EAAS,CACxB,MAAO,EACR,CAAC,EACKC,EAAQD,EAAS,CACtB,QAAS,GACT,gBAAgB,EAChB,SAAS,EACV,CAAC,EACKE,EAAkBC,EAAe,CACtC,IAAK,uBACL,WAAWC,EAAQ,CAClB,MAAO,CACN,IAAK,CACJ,QAAS,eACT,MAAOH,EAAM,QACb,SAAUA,EAAM,SAChB,MAAOH,EAAM,MACb,gBAAiBG,EAAM,eACvB,CACD,CACD,CACF,CAAC,EAEKI,EAAsBF,EAAe,CAC1C,IAAK,0BACL,WAAWC,EAAQ,OAClB,MAAO,CACN,QAAS,eACT,MAAME,EAAAR,EAAM,cAAN,YAAAQ,EAAmB,KACzB,WAAY,CAAC,QAAS,WAAY,iBAAiB,EACnD,OAAQ,CAACL,EAAM,QAASA,EAAM,SAAUA,EAAM,eAAe,CAC7D,CACD,CACF,CAAC,EAIKM,EAAcC,GAAU,CAC7BN,EAAgB,OACf,CAAE,EACF,CACC,UAAW,CACV,GAAI,CAACD,EAAM,QACV,MAAO,qBAER,EACD,UAAYQ,GAAS,CAEpBC,EAAY,CACZ,KAAM,gDACN,KAAM,QACN,YAAa,yCACjB,CAAI,EACAF,EAAO,CACP,EACD,QAAQG,EAAK,CACZC,EAAUD,CAAG,CACb,CACD,CACD,CACF,EAEME,EAAeL,GAAU,CAC9BH,EAAoB,OACnB,CAAE,EACF,CACC,UAAW,CACV,GAAI,CAACN,EAAQ,MACZ,MAAO,mBAER,EACD,WAAY,CACXH,EAAQ,MAAM,OAAQ,EACtBc,EAAY,CACX,KAAM,+BACN,KAAM,QACN,YAAa,yCAClB,CAAK,EACDF,EAAO,CACP,EACD,QAAQG,EAAK,CACZC,EAAUD,CAAG,CACb,CACD,CACD,CACF,EAEMC,EAAaD,GAAQ,OAC1BD,EAAY,CACX,MAAO,QACP,OAAMJ,EAAAK,EAAI,WAAJ,YAAAL,EAAe,KAAMK,EAC3B,KAAM,IACN,YAAa,wCACb,SAAU,aACV,QAAS,EACX,CAAE,CACF,EAEA,OAAAG,EACC,IAAMhB,EAAM,cACXiB,GAAe,CACfhB,EAAQ,MAAQgB,GAAA,YAAAA,EAAY,KAC5B,CACF,41CCReC,GAAW,EAC1B,MAAMC,EAAOC,EAAO,OAAO,EACrBC,EAAeC,EAAI,IAAI,EACvBC,EAAqBD,EAAI,EAAK,EAE9BE,EAAoB,IAClBH,EAAa,MAEfrB,EAAQD,EAWR0B,EAAaC,EAAS,IACvB1B,EAAM,YAAY,KAAK,WACnB,iCAAmCA,EAAM,YAAY,KAAK,WAE3D,IACP,EAwCK2B,EAAqB,CAACC,EAAc,OAAS,CAClDP,EAAa,MAAQO,EACrBL,EAAmB,MAAQ,EAC5B,EACMM,EAAW,IAAM,SACtB,IAAIC,EAAgB,GACpB,QAAGtB,EAAAR,EAAM,YAAY,OAAlB,YAAAQ,EAAwB,UAASuB,EAAAZ,EAAK,OAAL,YAAAY,EAAW,QAC5CD,EAAgB,IAOZA,CACR,w7FC1MA,MAAM9B,EAAQD,EAWRiC,EAAOC,EACb,IAAIC,EAASZ,EAAItB,EAAM,UAAU,EAE7BmC,EAAcC,GAAU,CAC3BJ,EAAK,oBAAqBI,CAAK,CAChC,EAEA,SAASC,EAAWC,EAAO,CAC1BH,EAAWG,CAAK,EAChBJ,EAAO,MAAQI,CAChB,umBCGA,MAAM1C,EAAOC,gBAAY,EACnB0C,EAAU1C,EAAYE,EAAA,eAAe,EACrCyC,EAAc3C,EAAWE,EAAC,aAAa,EAE7C,IAAI0C,EAASvC,EAAS,CACrB,OAAQ,GACR,OAAQ,CACT,CAAC,EAED,MAAMF,EAAQD,EAOR2C,EAAerC,EAAe,CACnC,IAAK,uBACL,WAAWC,EAAQ,CAClB,MAAO,CACN,IAAKqC,EAAA,CACJ,QAAS,oBACT,OAAQ3C,EAAM,WACXM,EAEJ,CACD,CACF,CAAC,EACD,SAASsC,EAAalC,EAAO,CAC5B+B,EAAO,OAASA,EAAO,OAAS,EAChCC,EAAa,OAAOD,EAAQ,CAC3B,UAAW,CACV,GAAI,CAACA,EAAO,OACX,MAAO,wBAER,EACD,WAAY,CACXF,EAAQ,MAAM,OAAQ,EACtBC,EAAY,MAAM,OAAQ,CAC1B,EACD,QAAQ3B,EAAK,OACZD,EAAY,CACX,OAAMJ,EAAAK,EAAI,WAAJ,YAAAL,EAAe,KAAMK,EAC3B,KAAM,IACN,YAAa,yBACjB,CAAI,CACD,CACH,CAAE,EACDH,EAAO,CACR,ghCClBA,MAAMS,EAAOC,EAAO,OAAO,EAErBpB,EAAQD,EAeRyC,EAAcnC,EAAe,CAClC,IAAK,0BACL,MAAO,CAAC,qBAAsBL,EAAM,WAAWQ,EAAAR,EAAM,aAAN,YAAAQ,EAAkB,MAAM,EACvE,OAAQ,CACP,QAAS,mBACT,QAAS,CACR,MAAOR,EAAM,UACb,OAAO+B,EAAA/B,EAAM,aAAN,YAAA+B,EAAkB,MACzB,CACD,EACD,KAAM,IAAAc,EAAA1B,EAAK,OAAL,MAAA0B,EAAW,KAClB,CAAC,EAEKN,EAAUlC,EAAe,CAC9B,IAAK,kDACL,MAAO,CAAC,gBAAiBL,EAAM,SAAS,EACxC,OAAQ,CACP,MAAOA,EAAM,SACb,EACD,KAAM,EACP,CAAC,EAEK8C,EAAkBxB,EAAI,EAAK,EAEjC,SAASyB,GAAkB,CAC1BD,EAAgB,MAAQ,EACzB,0zDCdA,MAAM9C,EAAQD,EAOR6B,EAAcvB,EAAe,CAClC,IAAK,wDACL,MAAO,CAAC,QAASL,EAAM,SAAS,EAChC,OAAQ,CACP,MAAOA,EAAM,SACb,EACD,KAAM,EACP,CAAC,EAEKgD,EAActB,EAAS,IAAM,SAClC,IAAIuB,EAAQ,CAAC,CAAE,MAAO,aAAc,MAAO,CAAE,KAAM,QAAQ,EAAI,EAC/D,OAAAA,EAAM,KAAK,CACV,OAAOzC,EAAAoB,GAAA,YAAAA,EAAa,OAAb,YAAApB,EAAmB,MAC1B,MAAO,CAAE,KAAM,cAAe,OAAQ,CAAE,WAAWuB,EAAAH,GAAA,YAAAA,EAAa,OAAb,YAAAG,EAAmB,KAAQ,CAChF,CAAE,EACMkB,CACR,CAAC,EAEKC,EAAWxB,EAAS,IAAM,SAC/B,MAAO,CACN,OAAOlB,EAAAoB,GAAA,YAAAA,EAAa,OAAb,YAAApB,EAAmB,MAC1B,aAAauB,EAAAH,GAAA,YAAAA,EAAa,OAAb,YAAAG,EAAmB,WAChC,CACF,CAAC,EAED,OAAAoB,GAAoBD,CAAQ"}